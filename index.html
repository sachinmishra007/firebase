

<html>
<head>


</head>
<body ng-app="app" ng-controller="appCtrl" ng-init="init()">
    <div>
        Language :{{LanguageOption}}
        <!--{{app|json}}-->
        <br />
        Questions :
        <li ng-repeat="ques in app.Questions track by $index">
            {{$index+1}} {{ques}} OR
        </li><br />
        Answers :
        <li ng-repeat="answer in app.Answers track by $index">
            {{$index+1}}  {{answer}}
        </li><br />
        ImageUrl:
        <li ng-repeat="imag in app.ImageUrls track by $index">
            {{$index+1}}  {{imag}}
        </li><br />
        Reference Link:
        <li ng-repeat="refer in app.ReferenceLinks track by $index">
            {{$index+1}} {{refer.ReferTitle}} - >  {{refer.ReferLink}}
        </li><br />
        Online Example Link:
        <li ng-repeat="refer in app.OnlineExampleLinks track by $index">
            {{$index+1}} {{refer.ExampleTitle}} - >  {{refer.ExampleLink}}
        </li>
    </div>
    <br />
    <select ng-model="LanguageOption" ng-options="l.value as l.title for l in LangOptions" ng-change="LoadData(LanguageOption)">
        <option value="" selected>-----------Select------------</option>
    </select>
    <br />
    <textarea ng-model="QuestionModel" placeholder="Question"></textarea>
    <button type="button" ng-click="addQuestions(QuestionModel)">+</button>
    <br />

    <textarea ng-model="AnswerModel" placeholder="Answer"></textarea>
    <button type="button" ng-click="addAnswer(AnswerModel)">+</button>
    <br />
    <textarea ng-model="ImageUrl" placeholder="ImageUrl"></textarea>
    <button type="button" ng-click="addImage(ImageUrl)">+</button>
    <br />
    <textarea ng-model="refer.ReferTitle" placeholder="ReferenceTitle"></textarea>
    <textarea ng-model="refer.ReferLink" placeholder="ReferenceLink"></textarea>
    <button type="button" ng-click="addReferenceLink(refer)">+</button>
    <br />
    <textarea ng-model="onlineExample.ExampleTitle" placeholder="ExampleTitle"></textarea>
    <textarea ng-model="onlineExample.ExampleLink" placeholder="ExampleLink"></textarea>
    <button type="button" ng-click="addOnlineExampleLink(onlineExample)">+</button>
    <button ng-click="Save()">
        Save
    </button>

    <table style="width:100%">
        <thead>
        <th>Question</th>
        <th>Answers</th>
        <th>Image Url</th>
        <th>Reference Link</th>
        <th>Operation</th>
        </thead>
        <tbody>
            <tr ng-repeat="value in DB">
                <td>
                    <span ng-repeat="values in value.Questions track by $index">
                        <p>{{values}}</p>
                    </span>
                </td>
                <td>
                    <span ng-repeat="values in value.Answers track by $index">
                        <p style="width:50%">{{values}}</p>
                    </span>
                </td>
                <td>
                    <span ng-repeat="values in value.ImageUrls track by $index">
                        <p>{{values}}</p>
                    </span>
                </td>
                <td>
                    <span ng-repeat="values in value.ImageUrls track by $index">
                        <p>{{values}}</p>
                    </span>
                </td>
                <td>
                    <button type="button" ng-click="edit(value,value.$id)">Edit</button>
                    <button type="button" ng-click="delete(value.$id)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>

    <script src="script/angular.min.js"></script>
    <script src="script/firebase.js"></script>
    <script src="script/angularfire.min.js"></script>
    <script>
        angular.module('app', ["firebase"])
                .controller('appCtrl', function ($scope, $firebase) {




                    $scope.init = function () {

                        $scope.LanguageOption = 'angularjs';
                        console.log($scope.LanguageOption);
                    };
                    $scope.LangOptions = [{
                        value: 'angularjs',
                        title: 'Angular JS'
                    }, {
                        value: 'mvc',
                        title: 'MVC'
                    }, {
                        value: 'linq',
                        title: 'LINQ'
                    }, {
                        value: 'chsarp',
                        title: 'C Sharp (C#)'
                    }];

                    var ref;
                    //if ($scope.LanguageOption == 'angularjs') {
                    //    ref = new Firebase("https://interviewpreparation-53102.firebaseio.com/angularjs");
                    //}
                    //else if ($scope.LanguageOption == 'mvc') {
                    //    ref = new Firebase("https://interviewpreparation-53102.firebaseio.com/mvc");
                    //}
                    //else if ($scope.LanguageOption == 'linq') {
                    //    ref = new Firebase("https://interviewpreparation-53102.firebaseio.com/linq");
                    //}
                    //else if ($scope.LanguageOption == 'chsarp') {
                    //    ref = new Firebase("https://interviewpreparation-53102.firebaseio.com/csharp");
                    //}
                     
                    
                    $scope.LoadData = function (LanOption) {
                      
                        console.log(LanOption);
                        if (LanOption == 'angularjs') {
                            ref = new Firebase("https://interviewpreparation-53102.firebaseio.com/angularjs");
                        }
                        else if (LanOption == 'mvc') {
                            ref = new Firebase("https://interviewpreparation-53102.firebaseio.com/mvc");
                        }
                        else if (LanOption == 'linq') {
                            ref = new Firebase("https://interviewpreparation-53102.firebaseio.com/linq");
                        }
                        else if ($scope.LanguageOption == 'chsarp') {
                            ref = new Firebase("https://interviewpreparation-53102.firebaseio.com/csharp");
                        }
                         
                        var sync = $firebase(ref);
                        $scope.DB = sync.$asArray();
                    }

                    $scope.LoadData('angularjs');
                    //console.log($scope.DB);
                    $scope.ReferenceLink = [];
                    $scope.Question = [];
                    $scope.OnlineExampleLink = [];
                    $scope.Answer = [];
                    $scope.Image = [];
                    $scope.app = { IsApproped: true, AddedbyUser: 'Admin', AddedTimeStap: new Date().valueOf(), NegativeAddedTimeStap: -new Date().valueOf() };

                    $scope.addQuestions = function (Question) {
                        $scope.Question.push(Question);
                        $scope.QuestionModel = '';
                        $scope.app.Questions = $scope.Question;
                        //console.log($scope.app);
                    }
                    $scope.addAnswer = function (AnswerModel) {
                        $scope.Answer.push(AnswerModel);
                        $scope.AnswerModel = '';
                        $scope.app.Answers = $scope.Answer;
                        //console.log($scope.app);
                    }

                    $scope.addImage = function (ImageUrl) {
                        $scope.Image.push(ImageUrl);
                        $scope.ImageUrl = '';
                        $scope.app.ImageUrls = $scope.Image;
                        //console.log($scope.app);
                    }

                    $scope.addReferenceLink = function (ReferenceLink) {
                        $scope.ReferenceLink.push(ReferenceLink);
                        $scope.refer = {};
                        $scope.app.ReferenceLinks = $scope.ReferenceLink;
                        //console.log($scope.app);
                    }

                    $scope.addOnlineExampleLink = function (ExampleLink) {
                        $scope.OnlineExampleLink.push(ExampleLink);
                        $scope.onlineExample = {};
                        $scope.app.OnlineExampleLinks = $scope.OnlineExampleLink;
                    }
                    $scope.Save = function () {
                        if ($scope.LanguageOption != '') {
                            $scope.DB.$add($scope.app);
                            $scope.Question = [];
                            $scope.Answer = [];
                            $scope.Image = [];
                            $scope.ReferenceLinks = [];
                            $scope.app = { IsApproped: true, AddedbyUser: 'Admin', AddedTimeStap: new Date().valueOf(), NegativeAddedTimeStap: -new Date().valueOf() };
                        }
                        else {
                            alert('Please select Language from drop down');
                        }
                    }
                    $scope.edit = function (Value, item) {
                        console.log(Value, item);
                        $scope.app = item
                    }
                    $scope.delete = function (item) {
                        ref.child(item).remove();
                    }

                });

    </script>
</body>
</html>
